# 下文管理器 Context Manager

**实例1：**
```py
f = open("test.txt", "w")
print('whether the file is open:', f.closed)
f.write("Hello World!")
f.close()
print('whether the file is open:', f.closed)
```

    当文件在操作出现异常时未能正确关闭的情况，那么要正确的处理涉及到异常的资源管理时，需要使用try/finally代码结构。

**实例2：**
```py
f = open("test.txt")
try:
    for line in f.readlines():
        print(line)
finally:
    f.close()
```
    不管文件操作有没有出现异常，try/finally中的finnally语句都会执行，从而保证文件的正确关闭。
    但是很显然Python的设计者们并没有满足于此，他们以希望更简洁更优美的形式来实现资源的清理，而且希望这种清理工作不需要暴露给使用者，所以便出现了with语句。

*语法：*
    
    with context as var:
        statements

**实例3：**
```py
with open("test.txt", "w") as f:
	f.write("Hello World!!!")
	print('in with, whether the file is open:', f.closed)
print('Leave with, whether the file is open:', f.closed)
```

高级应用参考：https://www.cnblogs.com/nnnkkk/p/4309275.html